<app-navbar></app-navbar>
<div class="single">
  <div class="container">
    <div class="row">
      <div class="col-lg-8">
        <div class="single-content">
          <img
            [src]="mainImage"
            alt="Main Post Image"
            style="width: 800px; height: 500px"
          />
          <h2>{{ postTitle }}</h2>
          <p>{{ postContent }}</p>
        </div>
        <div class="single-bio">
          <div class="single-bio-img">
            <img [src]="authorImage" alt="Author Image" />
          </div>
          <div class="single-bio-text">
            <h3>{{ authorName }}</h3>
            <p>{{ authorBio }}</p>
          </div>
        </div>

        <div class="single-comment">
          <h2>{{ comments.length }} Comments</h2>
          <ul class="comment-list">
            <li class="comment-item" *ngFor="let comment of comments">
              <div class="comment-body">
                <div class="comment-img">
                  <img [src]="comment.userImage" alt="User Image" />
                </div>
                <div class="comment-text">
                  <h3>
                    <a href="">{{ comment.userName }}</a>
                  </h3>
                  <span
                    >{{ comment.date | date : "dd MMM yyyy" }} at
                    {{ comment.date | date : "hh:mm a" }}</span
                  >
                  <p>{{ comment.content }}</p>
                  <a class="btn" href="">Reply</a>
                </div>
              </div>
              <ul class="comment-child" *ngIf="comment.replies">
                <li class="comment-item" *ngFor="let reply of comment.replies">
                  <div class="comment-body">
                    <div class="comment-img">
                      <img [src]="reply.userImage" alt="User Image" />
                    </div>
                    <div class="comment-text">
                      <h3>
                        <a href="">{{ reply.userName }}</a>
                      </h3>
                      <span
                        >{{ reply.date | date : "dd MMM yyyy" }} at
                        {{ reply.date | date : "hh:mm a" }}</span
                      >
                      <p>{{ reply.content }}</p>
                      <a class="btn" href="">Reply</a>
                    </div>
                  </div>
                </li>
              </ul>
            </li>
          </ul>
        </div>
        <div class="comment-form">
          <h2>Leave a comment</h2>
          <form (ngSubmit)="onSubmitComment()">
            <div class="form-group">
              <label for="name">Name *</label>
              <input
                type="text"
                class="form-control"
                id="name"
                [(ngModel)]="newComment.name"
                name="name"
                required
              />
            </div>
            <div class="form-group">
              <label for="email">Email *</label>
              <input
                type="email"
                class="form-control"
                id="email"
                [(ngModel)]="newComment.email"
                name="email"
                required
              />
            </div>
            <div class="form-group">
              <label for="website">Website</label>
              <input
                type="url"
                class="form-control"
                id="website"
                [(ngModel)]="newComment.website"
                name="website"
              />
            </div>
            <div class="form-group">
              <label for="message">Message *</label>
              <textarea
                id="message"
                cols="30"
                rows="5"
                class="form-control"
                [(ngModel)]="newComment.message"
                name="message"
                required
              ></textarea>
            </div>
            <div class="form-group">
              <input
                type="submit"
                value="Post Comment"
                class="btn btn-custom"
              />
            </div>
          </form>
        </div>
      </div>

      <div class="col-lg-4">
        <div class="sidebar">
          <div class="sidebar-widget">
            <div class="search-widget">
              <form (ngSubmit)="onSearch()">
                <input
                  class="form-control"
                  type="text"
                  placeholder="Search Keyword"
                  [(ngModel)]="searchKeyword"
                  name="search"
                />
                <button class="btn" type="submit">
                  <i class="fa fa-search"></i>
                </button>
              </form>
            </div>
          </div>

          <div class="sidebar-widget">
            <h2 class="widget-title">Recent Post</h2>
            <div class="recent-post">
              <div class="post-item" *ngFor="let post of recentPosts">
                <div class="post-img">
                  <img [src]="post.image" alt="Recent Post Image" />
                </div>
                <div class="post-text">
                  <a (click)="onPostClick(post.id)" style="cursor: pointer">{{
                    post.title
                  }}</a>
                  <div class="post-meta">
                    <p>
                      By<a>{{ post.author }}</a>
                    </p>
                    <p>
                      In<a>{{ post.category }}</a>
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="sidebar-widget">
            <div class="image-widget">
              <a href="#"
                ><img [src]="sidebarImage1" alt="Sidebar Image 1"
              /></a>
            </div>
          </div>

          <div class="sidebar-widget">
            <div class="tab-post">
              <ul class="nav nav-pills nav-justified">
                <li class="nav-item">
                  <a
                    class="nav-link"
                    [class.active]="activeTab === 'featured'"
                    (click)="setActiveTab('featured')"
                    >Featured</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    [class.active]="activeTab === 'popular'"
                    (click)="setActiveTab('popular')"
                    >Popular</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    [class.active]="activeTab === 'latest'"
                    (click)="setActiveTab('latest')"
                    >Latest</a
                  >
                </li>
              </ul>

              <div class="tab-content">
                <div [ngClass]="{ 'd-none': activeTab !== 'featured' }">
                  <div class="post-item" *ngFor="let post of featuredPosts">
                    <div class="post-img">
                      <img [src]="post.image" alt="Featured Post Image" />
                    </div>
                    <div class="post-text">
                      <a
                        (click)="onPostClick(post.id)"
                        style="cursor: pointer"
                        >{{ post.title }}</a
                      >
                      <div class="post-meta">
                        <p>
                          By<a>{{ post.author }}</a>
                        </p>
                        <p>
                          In<a>{{ post.category }}</a>
                        </p>
                      </div>
                    </div>
                  </div>
                </div>

                <div [ngClass]="{ 'd-none': activeTab !== 'popular' }">
                  <div class="post-item" *ngFor="let post of popularPosts">
                    <div class="post-img">
                      <img [src]="post.image" alt="Popular Post Image" />
                    </div>
                    <div class="post-text">
                      <a
                        (click)="onPostClick(post.id)"
                        style="cursor: pointer"
                        >{{ post.title }}</a
                      >
                      <div class="post-meta">
                        <p>
                          By<a>{{ post.author }}</a>
                        </p>
                        <p>
                          In<a>{{ post.category }}</a>
                        </p>
                      </div>
                    </div>
                  </div>
                </div>

                <div [ngClass]="{ 'd-none': activeTab !== 'latest' }">
                  <div class="post-item" *ngFor="let post of latestPosts">
                    <div class="post-img">
                      <img [src]="post.image" alt="Latest Post Image" />
                    </div>
                    <div class="post-text">
                      <a
                        (click)="onPostClick(post.id)"
                        style="cursor: pointer"
                        >{{ post.title }}</a
                      >
                      <div class="post-meta">
                        <p>
                          By<a>{{ post.author }}</a>
                        </p>
                        <p>
                          In<a>{{ post.category }}</a>
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="sidebar-widget">
            <h2 class="widget-title">Text Widget</h2>
            <div class="text-widget">
              <p>{{ textWidgetContent }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
